name: Autograding Tests
'on':
- push
- repository_dispatch
permissions:
  checks: write
  actions: read
  contents: read
jobs:
  run-autograding-tests:
    runs-on: ubuntu-latest
    if: github.actor != 'github-classroom[bot]'
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    - name: Compilation Check
      id: compilation-check
      uses: classroom-resources/autograding-command-grader@v1
      with:
        test-name: Compilation Check
        setup-command: ''
        command: mvn -ntp compile
        timeout: 10
        max-score: 1
    - name: Basic Tests
      id: basic-tests
      uses: classroom-resources/autograding-command-grader@v1
      with:
        test-name: Basic Tests
        setup-command: ''
        command: mvn - ntp test -DBasicTest
        timeout: 10
        max-score: 1
    - name: Edge Case Tests
      id: edge-case-tests
      uses: classroom-resources/autograding-command-grader@v1
      with:
        test-name: Edge Case Tests
        setup-command: ''
        command: mvn -ntp test -Dtest=EdgeCaseTest
        timeout: 10
        max-score: 1
    - name: Autograding Reporter
      uses: classroom-resources/autograding-grading-reporter@v1
      env:
        COMPILATION-CHECK_RESULTS: "${{steps.compilation-check.outputs.result}}"
        BASIC-TESTS_RESULTS: "${{steps.basic-tests.outputs.result}}"
        EDGE-CASE-TESTS_RESULTS: "${{steps.edge-case-tests.outputs.result}}"
      with:
        runners: compilation-check,basic-tests,edge-case-tests
